{% extends "core/student/base_student.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}

<div class="card">
  <h1 style="margin-bottom: 6px;">Welcome, {{ request.user.username }} ðŸ‘‹</h1>
  <p class="card-subtitle" style="margin-bottom:0;">
    Your tutor will review your diagnostic before the demo class.
  </p>
</div>

<div class="card">
  <div class="card-title">Your Profile</div>
  <div class="card-subtitle">Basic details used to tailor your learning</div>

  <div class="profile-grid">
    <div class="profile-item">
      <span>Grade</span>
      <strong>{{ student.grade_level }}</strong>
    </div>

    <div class="profile-item">
      <span>Diagnostic</span>
      {% if latest_result %}
        <strong><span class="badge badge-success">Completed</span></strong>
      {% else %}
        <strong><span class="badge badge-warning">Not started</span></strong>
      {% endif %}
    </div>

    <div class="profile-item">
      <span>Weakest Topic</span>
      <strong>
        {% if weakest_topic %}
          {{ weakest_topic }}
        {% else %}
          â€”
        {% endif %}
      </strong>
    </div>
  </div>
</div>

<div class="card">
  <div class="card-title">Math Diagnostic</div>
  <div class="card-subtitle">Answer honestly so your tutor can plan your demo class</div>

  {% if latest_result %}
    <p><strong>Score:</strong> {{ latest_result.percent_score }}%</p>
    <p style="margin-bottom: 0;">Submitted. Your tutor will review your results.</p>

    <div style="margin-top: 12px;">
      <a href="{% url 'diagnostic_done' %}">View submission â†’</a>
    </div>
  {% else %}
    <p style="margin-bottom: 12px;">You havenâ€™t completed the diagnostic yet.</p>
    <a class="btn-primary" href="{% url 'start_diagnostic' %}" style="display:inline-block; width:auto; padding:10px 16px;">
      Start Diagnostic
    </a>
  {% endif %}
</div>

<div class="card">
  <div class="card-title">Next Steps</div>
  <ul style="margin: 0;">
    <li>Complete the diagnostic if not done already</li>
    <li>Your tutor will review results before the demo class</li>
    <li>Attend your demo class and receive a custom plan</li>
  </ul>
</div>

<div class="page-spacer"></div>

{% endblock %}
