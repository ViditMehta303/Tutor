{% extends "core/student/base_student.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="rm-dashboard">

  <!-- Header -->
  <div class="rm-dashboard-header">
    <h1>Welcome, {{ request.user.username }} ðŸ‘‹</h1>
    <p class="rm-muted">
      Your tutor will review your diagnostic before the demo class.
    </p>
  </div>

  <!-- Cards -->
  <div class="rm-grid">

    <!-- Profile Card -->
    <div class="rm-card">
      <h2>Your Profile</h2>
      <p class="rm-muted">Basic details used to tailor your learning</p>

      <div class="rm-row">
        <span>Grade</span>
        <strong>{{ student.grade }}</strong>
      </div>

      <div class="rm-row">
        <span>Diagnostic</span>
        <strong>
          {% if latest_result %}
            Completed
          {% else %}
            Not started
          {% endif %}
        </strong>
      </div>

      <div class="rm-row">
        <span>Weakest Topic</span>
        <strong>{{ weakest_topic|default:"â€”" }}</strong>
      </div>
    </div>

    <!-- Diagnostic Card -->
    <div class="rm-card">
      <h2>Math Diagnostic</h2>
      <p class="rm-muted">
        Answer honestly so your tutor can plan your demo class
      </p>

      {% if latest_result %}
        <div class="rm-score">
          <span>Score</span>
          <strong>{{ latest_result.percent_score }}%</strong>
        </div>

        <p class="rm-muted">
          Submitted. Your tutor will review your results.
        </p>

        <a class="rm-link" href="#">
          View submission â†’
        </a>
      {% else %}
        <p class="rm-muted">You havenâ€™t taken the diagnostic yet.</p>

        <a class="rm-btn rm-btn-primary" href="/diagnostic/start/">
          Start Diagnostic
        </a>
      {% endif %}
    </div>

  </div>

  <!-- Next Steps -->
  <div class="rm-card rm-wide">
    <h2>Next Steps</h2>
    <ul class="rm-list">
      <li>Complete the diagnostic if not done already</li>
      <li>Your tutor will review results before the demo</li>
      <li>Attend your demo class and receive a custom plan</li>
    </ul>
  </div>

</div>
{% endblock %}
